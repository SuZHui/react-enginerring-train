{"version":3,"file":"js/Result.e0f6c76e.js","mappings":"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","sources":["webpack://react-enginerring-train/./src/api/index.js","webpack://react-enginerring-train/./src/hooks/usePlayer.js","webpack://react-enginerring-train/./src/pages/Result/Card.jsx","webpack://react-enginerring-train/./src/pages/Result/ErrorWrapper.jsx","webpack://react-enginerring-train/./src/pages/Result/index.jsx"],"sourcesContent":["import Axios from \"axios\";\nimport { Modal } from \"antd\";\nimport useSWRInfinite from \"swr/infinite\";\nimport useSWR from \"swr\";\n\nlet modal;\n\nconst client = Axios.create({});\nclient.interceptors.response.use(\n  (res) => res.data,\n  (err) => {\n    if (Axios.isCancel(err)) {\n      // eslint-disable-next-line no-console\n      console.info(\"Request canceled\", err);\n    } else if (!modal) {\n      // 系统级错误 弹窗提示\n      const message = (() => {\n        let t = \"Request failed\";\n        if (err.response && err.response.data) {\n          t = err.response.data.message || t;\n        } else if (err.message) {\n          t = err.message;\n        }\n        return t;\n      })();\n      modal = Modal.error({\n        title: \"Error\",\n        content: message,\n        afterClose: () => {\n          modal = null;\n        },\n      });\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default {\n  getList(t) {\n    const fetcher = (url) => client.get(url);\n    const type = t.toLowerCase() !== \"all\" ? `+language:${t}` : \"\";\n    const getKey = (index) =>\n      `https://api.github.com/search/repositories?q=stars:%3E1${type}&sort=stars&order=desc&type=Repositories&per_page=30&page=${\n        index + 1\n      }`;\n    return useSWRInfinite(getKey, fetcher, {\n      shouldRetryOnError: false,\n      revalidateFirstPage: false,\n    });\n  },\n  getUser(name) {\n    return client.get(`https://api.github.com/users/${name}`);\n  },\n  getUser2(name) {\n    const key = name ? `https://api.github.com/users/${name}` : null;\n    const fetcher = (url) => client.get(url);\n    return useSWR(key, fetcher, {\n      shouldRetryOnError: false,\n      revalidateOnFocus: false,\n    });\n  },\n};\n","import API from \"@/api\";\n\nexport default function usePlayer(name) {\n  const { data, error, isValidating, mutate } = API.getUser2(name);\n  return {\n    player: data,\n    isLoading: isValidating,\n    isError: !!error || (!data && !isValidating),\n    refresh: mutate,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Image, Spin } from \"antd\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faUserPlus,\n  faUsers,\n  faCode,\n  faLocationArrow,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport default function Card(props) {\n  const {\n    status,\n    avatar_url,\n    location,\n    following,\n    followers,\n    html_url,\n    public_repos,\n  } = props;\n\n  return (\n    <a\n      href={html_url}\n      target=\"_blank\"\n      className=\"db br1 bg-light-gray mb4 pv4 shadow-hover no-underline color-inherit w-80 center\"\n      rel=\"noreferrer\"\n    >\n      <div className=\"flex flex-column justify-center items-center\">\n        <h2 className=\"mb2 mt0\">{status}</h2>\n        <Image\n          src={avatar_url}\n          preview={false}\n          width=\"120px\"\n          height=\"120px\"\n          placeholder={\n            <div className=\"w-100 h-100 tc\">\n              <Spin />\n            </div>\n          }\n          fallback=\"data:image/png;base64,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\"\n        />\n        <h4 className=\"f4 mt3 mb1 red\">Scores: {public_repos}</h4>\n        <div className=\"ph4 tl w-100 f5\">\n          <p className=\"mv2 flex items-center\" title={location}>\n            <FontAwesomeIcon\n              icon={faLocationArrow}\n              color=\"#ffbf74\"\n              fixedWidth\n            />\n            <span className=\"ml2 flex-auto-l truncate\">{location}</span>\n          </p>\n          <p className=\"mv2 flex items-center\">\n            <FontAwesomeIcon icon={faUsers} color=\"#ffd701\" fixedWidth />\n            <span className=\"ml2\">{followers}</span>\n          </p>\n          <p className=\"mv2 flex items-center\">\n            <FontAwesomeIcon icon={faUserPlus} color=\"#8dc6f3\" fixedWidth />\n            <span className=\"ml2\">{following}</span>\n          </p>\n          <p className=\"mv2 flex items-center\">\n            <FontAwesomeIcon icon={faCode} color=\"#f18d95\" fixedWidth />\n            <span className=\"ml2\">{public_repos}</span>\n          </p>\n        </div>\n      </div>\n    </a>\n  );\n}\n\nCard.propTypes = {\n  // 胜负状态\n  status: PropTypes.string,\n  location: PropTypes.string,\n  avatar_url: PropTypes.string.isRequired,\n  following: PropTypes.number.isRequired,\n  followers: PropTypes.number.isRequired,\n  html_url: PropTypes.string.isRequired,\n  public_repos: PropTypes.number.isRequired,\n};\n\nCard.STATUS = {\n  WIN: \"Winner\",\n  LOSE: \"Loser\",\n  TIE: \"Tie\",\n};\n","import React from \"react\";\nimport { Spin, Empty } from \"antd\";\nimport PropTypes from \"prop-types\";\n\nexport default function ErrorWrapper({ isLoading }) {\n  return <div className=\"pv6 tc\">{isLoading ? <Spin /> : <Empty />}</div>;\n}\nErrorWrapper.propTypes = {\n  isLoading: PropTypes.bool.isRequired,\n};\n","import React, { useMemo } from \"react\";\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\nimport { Row, Col, Button } from \"antd\";\nimport usePlayer from \"@/hooks/usePlayer\";\nimport Card from \"./Card\";\nimport ErrorWrapper from \"./ErrorWrapper\";\n\nexport default function Result() {\n  const [search] = useSearchParams();\n  const p1 = usePlayer(search.get(\"p1\"));\n  const p2 = usePlayer(search.get(\"p2\"));\n  const [p1State, p2State] = useMemo(() => {\n    if (!p1.player || !p2.player) {\n      return [null, null];\n    }\n    const max = Math.max(p1.player.public_repos, p2.player.public_repos);\n    const arr = [p1.player.public_repos, p2.player.public_repos];\n    if (arr.every((p) => p === max)) {\n      // 平局\n      return [Card.STATUS.TIE, Card.STATUS.TIE];\n    }\n    // 胜负\n    return arr.map((p) => (p === max ? Card.STATUS.WIN : Card.STATUS.LOSE));\n  }, [p1, p2]);\n\n  const navigate = useNavigate();\n  const handleReset = () => {\n    navigate(\"/battle\");\n  };\n\n  return (\n    <div className=\"result pt5 overflow-y-auto\">\n      <Row className=\"mt4\" justify=\"center\">\n        <Col xs={18} sm={10} md={8} lg={6} xl={6} xxl={4}>\n          {p1.isError || p1.isLoading ? (\n            <ErrorWrapper isLoading={p1.isLoading} />\n          ) : (\n            <Card status={p1State} {...p1.player} />\n          )}\n        </Col>\n        <Col\n          xs={18}\n          sm={{ span: 10, offset: 2 }}\n          md={{ span: 8, offset: 6 }}\n          lg={{ span: 6, offset: 5 }}\n          xl={{ span: 6, offset: 6 }}\n          xxl={{ span: 4, offset: 4 }}\n        >\n          {p2.isError || p2.isLoading ? (\n            <ErrorWrapper isLoading={p2.isLoading} />\n          ) : (\n            <Card status={p2State} {...p2.player} />\n          )}\n        </Col>\n      </Row>\n      <Row justify=\"center\">\n        <Button size=\"large\" onClick={handleReset} type=\"primary\">\n          Reset\n        </Button>\n      </Row>\n    </div>\n  );\n}\n"],"names":["modal","client","Axios","interceptors","response","use","res","data","err","console","info","message","t","Modal","title","content","afterClose","Promise","reject","getList","type","toLowerCase","useSWRInfinite","index","url","get","shouldRetryOnError","revalidateFirstPage","getUser","name","getUser2","key","useSWR","revalidateOnFocus","usePlayer","API","error","isValidating","player","isLoading","isError","refresh","mutate","Card","props","status","avatar_url","location","following","followers","html_url","public_repos","href","target","className","rel","src","preview","width","height","placeholder","fallback","icon","faLocationArrow","color","fixedWidth","faUsers","faUserPlus","faCode","propTypes","PropTypes","STATUS","WIN","LOSE","TIE","ErrorWrapper","Result","search","useSearchParams","p1","p2","useMemo","max","Math","arr","every","p","map","p1State","p2State","navigate","useNavigate","justify","xs","sm","md","lg","xl","xxl","span","offset","size","onClick"],"sourceRoot":""}